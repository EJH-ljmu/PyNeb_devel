\hypertarget{namespacepyneb_1_1core_1_1emis_grid}{}\section{pyneb.\+core.\+emis\+Grid Namespace Reference}
\label{namespacepyneb_1_1core_1_1emis_grid}\index{pyneb.\+core.\+emis\+Grid@{pyneb.\+core.\+emis\+Grid}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classpyneb_1_1core_1_1emis_grid_1_1_emis_grid}{Emis\+Grid}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacepyneb_1_1core_1_1emis_grid_a377d90568cd9c52e35ebae2ac9a3c386}{get\+Emis\+Grid\+Dict}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{namespacepyneb_1_1core_1_1emis_grid_a377d90568cd9c52e35ebae2ac9a3c386}{}\index{pyneb\+::core\+::emis\+Grid@{pyneb\+::core\+::emis\+Grid}!get\+Emis\+Grid\+Dict@{get\+Emis\+Grid\+Dict}}
\index{get\+Emis\+Grid\+Dict@{get\+Emis\+Grid\+Dict}!pyneb\+::core\+::emis\+Grid@{pyneb\+::core\+::emis\+Grid}}
\subsubsection[{get\+Emis\+Grid\+Dict}]{\setlength{\rightskip}{0pt plus 5cm}def pyneb.\+core.\+emis\+Grid.\+get\+Emis\+Grid\+Dict (
\begin{DoxyParamCaption}
\item[{}]{elem\+\_\+list = {\ttfamily None}, }
\item[{}]{spec\+\_\+list = {\ttfamily None}, }
\item[{}]{atom\+\_\+list = {\ttfamily None}, }
\item[{}]{restore = {\ttfamily True}, }
\item[{}]{pypic\+\_\+path = {\ttfamily None}, }
\item[{}]{n\+\_\+tem = {\ttfamily 100}, }
\item[{}]{n\+\_\+den = {\ttfamily 100}, }
\item[{}]{tem\+\_\+min = {\ttfamily 5000.}, }
\item[{}]{tem\+\_\+max = {\ttfamily 20000.}, }
\item[{}]{den\+\_\+min = {\ttfamily 10.}, }
\item[{}]{den\+\_\+max = {\ttfamily 1e8}, }
\item[{}]{save = {\ttfamily True}, }
\item[{}]{atom\+Dict = {\ttfamily None}, }
\item[{}]{create\+Pypics\+Dir = {\ttfamily True}, }
\item[{}]{compute\+If\+Absent = {\ttfamily True}}
\end{DoxyParamCaption}
)}\label{namespacepyneb_1_1core_1_1emis_grid_a377d90568cd9c52e35ebae2ac9a3c386}
\begin{DoxyVerb}Return a dictionary of EmisGrid objects referred to by their atom string (e.g. 'O3').

Usage:
    emisgrids = pn.getEmisGridDict(['C', 'N', 'O'], [2, 3], save=True)
    emisgrids = pn.getEmisGridDict(atom_list=['N2', 'O2', 'O3'], pypic_path='/tmp/pypics/',
                    den_max = 1e6)
    emisgrids = pn.getEmisGridDict(atomDict=diags.atomDict)

Parameters:
    - elem_list         list of elements
    - spec_list         list of spectrum values (integers)
    - atom_list         list of atoms (e.g. ['N2', 'O3'])
    - restore           Boolean. If True (default), the program will search for a previously computed grid.
                        If not found, it will compute the EmisGrid (unless computeIfAbsent is set to False)
    - pypic_path        directory where to look for the pypic emissivity files. It defaults to pn.config.pypic_path, 
                        which is defined when the PyNeb session begins and corresponds to $HOME/.pypics if
                        the ENVIRONMENT variable HOME is accessible or to /tmp/pypics otherwise
    - n_tem, n_den      number of points in the Te and Ne samples resp. 
    - tem_min, tem_max, den_min, den_max    limits for Te and Ne
    - save              Boolean. If True (default), the emissivity grid will be saved. It has no effect if the 
                        EmisGrid has just been restored.
    - atomDict          dictionary of Atom objects
    - computeIfAbsent   If the file to restore is absent and this parameter is True (default), the 
                        EmisGrid is computed\end{DoxyVerb}
 

Definition at line \hyperlink{emis_grid_8py_source_l00312}{312} of file \hyperlink{emis_grid_8py_source}{emis\+Grid.\+py}.



References \hyperlink{misc_8py_source_l00117}{pyneb.\+utils.\+misc.\+parse\+Atom()}, and \hyperlink{saverestore_8py_source_l00003}{pyneb.\+utils.\+saverestore.\+save()}.



Referenced by \hyperlink{emis_grid_8py_source_l00238}{pyneb.\+core.\+emis\+Grid.\+Emis\+Grid.\+plot\+Line\+Ratio()}.


\begin{DoxyCode}
\hypertarget{namespacepyneb_1_1core_1_1emis_grid_l00312}{}\hyperlink{namespacepyneb_1_1core_1_1emis_grid_a377d90568cd9c52e35ebae2ac9a3c386}{00312}             atomDict=\textcolor{keywordtype}{None}, createPypicsDir=\textcolor{keyword}{True}, computeIfAbsent=\textcolor{keyword}{True}):
00313     \textcolor{stringliteral}{"""}
00314 \textcolor{stringliteral}{    Return a dictionary of EmisGrid objects referred to by their atom string (e.g. 'O3').}
00315 \textcolor{stringliteral}{    }
00316 \textcolor{stringliteral}{    Usage:}
00317 \textcolor{stringliteral}{        emisgrids = pn.getEmisGridDict(['C', 'N', 'O'], [2, 3], save=True)}
00318 \textcolor{stringliteral}{        emisgrids = pn.getEmisGridDict(atom\_list=['N2', 'O2', 'O3'], pypic\_path='/tmp/pypics/',}
00319 \textcolor{stringliteral}{                        den\_max = 1e6)}
00320 \textcolor{stringliteral}{        emisgrids = pn.getEmisGridDict(atomDict=diags.atomDict)}
00321 \textcolor{stringliteral}{}
00322 \textcolor{stringliteral}{    Parameters:}
00323 \textcolor{stringliteral}{        - elem\_list         list of elements}
00324 \textcolor{stringliteral}{        - spec\_list         list of spectrum values (integers)}
00325 \textcolor{stringliteral}{        - atom\_list         list of atoms (e.g. ['N2', 'O3'])}
00326 \textcolor{stringliteral}{        - restore           Boolean. If True (default), the program will search for a previously computed
       grid.}
00327 \textcolor{stringliteral}{                            If not found, it will compute the EmisGrid (unless computeIfAbsent is set to
       False)}
00328 \textcolor{stringliteral}{        - pypic\_path        directory where to look for the pypic emissivity files. It defaults to
       pn.config.pypic\_path, }
00329 \textcolor{stringliteral}{                            which is defined when the PyNeb session begins and corresponds to $HOME/.pypics
       if}
00330 \textcolor{stringliteral}{                            the ENVIRONMENT variable HOME is accessible or to /tmp/pypics otherwise}
00331 \textcolor{stringliteral}{        - n\_tem, n\_den      number of points in the Te and Ne samples resp. }
00332 \textcolor{stringliteral}{        - tem\_min, tem\_max, den\_min, den\_max    limits for Te and Ne}
00333 \textcolor{stringliteral}{        - save              Boolean. If True (default), the emissivity grid will be saved. It has no effect
       if the }
00334 \textcolor{stringliteral}{                            EmisGrid has just been restored.}
00335 \textcolor{stringliteral}{        - atomDict          dictionary of Atom objects}
00336 \textcolor{stringliteral}{        - computeIfAbsent   If the file to restore is absent and this parameter is True (default), the }
00337 \textcolor{stringliteral}{                            EmisGrid is computed}
00338 \textcolor{stringliteral}{            }
00339 \textcolor{stringliteral}{    """}
00340     \textcolor{keywordflow}{if} pypic\_path \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
00341         pypic\_path = pn.config.pypic\_path
00342     \textcolor{keywordflow}{else}:
00343         pn.config.pypic\_path = pypic\_path
00344     calling = \textcolor{stringliteral}{'getEmisGridDict'}
00345     \textcolor{keywordflow}{if} pypic\_path \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
00346         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
00347     emis\_grids = \{\}
00348     atoms = []
00349     \textcolor{keywordflow}{if} atomDict \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
00350         atoms = atomDict.keys()
00351     \textcolor{keywordflow}{else}:
00352         \textcolor{keywordflow}{if} atom\_list \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
00353             atoms = atom\_list
00354         \textcolor{keywordflow}{else}:
00355 \textcolor{comment}{# VL Removed 13 March 2015 because it made the code ignore the elem keyword             }
00356 \textcolor{comment}{#            atoms = pn.atomicData.getAllAtoms()}
00357             \textcolor{keywordflow}{if} (elem\_list \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}) \textcolor{keywordflow}{and} (spec\_list \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}):
00358                 atoms = pn.atomicData.getAllAtoms()
00359             \textcolor{keywordflow}{else}:
00360                 \textcolor{keywordflow}{for} elem \textcolor{keywordflow}{in} elem\_list:
00361                     \textcolor{keywordflow}{for} spec \textcolor{keywordflow}{in} spec\_list:
00362                         atoms.append(elem + str(spec)) 
00363     \textcolor{keywordflow}{for} atom \textcolor{keywordflow}{in} atoms:
00364         elem, spec = \hyperlink{namespacepyneb_1_1utils_1_1misc_a8c069186002a3e73dd474958e35034d5}{parseAtom}(atom)
00365         file\_ = \textcolor{stringliteral}{'\{0\}/emis\_\{1\}\{2\}.pypic'}.format(pypic\_path, elem, spec)
00366         \textcolor{keywordflow}{if} atomDict \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
00367             atomObj = atomDict[atom]
00368         \textcolor{keywordflow}{else}:
00369             atomObj = \textcolor{keywordtype}{None}
00370         \textcolor{keywordflow}{if} restore:
00371             \textcolor{keywordflow}{if} os.path.exists(file\_):
00372                 \textcolor{keywordflow}{try}:
00373                     emis\_grids[elem + spec] = \hyperlink{classpyneb_1_1core_1_1emis_grid_1_1_emis_grid}{EmisGrid}(restore\_file=file\_, atomObj=atomObj)
00374                     pn.log\_.message(\textcolor{stringliteral}{'Read %s'} % file\_, calling=calling)
00375                     compute\_this = \textcolor{keyword}{False}
00376                 \textcolor{keywordflow}{except}:
00377                     \textcolor{keywordflow}{if} computeIfAbsent:
00378                         pn.log\_.warn(\textcolor{stringliteral}{'Wrong emission map: \{0\}, creating it'}.format(file\_), calling=calling)
00379                         compute\_this = \textcolor{keyword}{True}
00380                     \textcolor{keywordflow}{else}:
00381                         pn.log\_.error(\textcolor{stringliteral}{'Wrong emission map: \{0\}'}.format(file\_), calling=calling)
00382                         compute\_this = \textcolor{keyword}{False}
00383             \textcolor{keywordflow}{else}:
00384                 pn.log\_.warn(\textcolor{stringliteral}{'Emission map not found: \{0\}'}.format(file\_), calling=calling)
00385                 \textcolor{keywordflow}{if} computeIfAbsent:
00386                     compute\_this = \textcolor{keyword}{True}
00387         \textcolor{keywordflow}{else}:
00388             compute\_this = \textcolor{keyword}{True}
00389         \textcolor{keywordflow}{if} compute\_this:
00390             \textcolor{keywordflow}{try}:
00391                 emis\_grids[atom] = \hyperlink{classpyneb_1_1core_1_1emis_grid_1_1_emis_grid}{EmisGrid}(elem, spec, n\_tem=n\_tem, n\_den=n\_den, tem\_min=tem\_min, 
      tem\_max=tem\_max,
00392                                               den\_min=den\_min, den\_max=den\_max, atomObj=atomObj)
00393                 \textcolor{keywordflow}{if} save:
00394                     emis\_grids[atom].\hyperlink{namespacepyneb_1_1utils_1_1saverestore_a9af489d3adae16abe18013129170baeb}{save}(file\_)
00395                     pn.log\_.message(\textcolor{stringliteral}{'%s saved to %s'} % ((atom), file\_), calling=calling)
00396             \textcolor{keywordflow}{except}:
00397                 pn.log\_.warn(\textcolor{stringliteral}{'No %s EmisGrid'} % (atom), calling=calling)
00398     \textcolor{keywordflow}{return} emis\_grids
00399 \end{DoxyCode}
